<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="plotting" href="plotting.html" /><link rel="prev" title="matchTime" href="matchTime.html" />

    <meta name="generator" content="sphinx-4.4.0, furo 2022.03.04"/>
        <title>piv_handling - dynamicAtlas 2022 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=935aa2abcc5c1da4283d1dc201fb1f0add16d23a" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=25ceb02ed1c46dc30f2321ff83e92799f69dfdb9" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">dynamicAtlas 2022 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">dynamicAtlas 2022 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Example scripts:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="example_usage_genes.html">Example for gathering gene patterns from atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_usage_piv.html">Example for computing and recalling velocity measurements</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Classes in +dynamicAtlas:</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="dynamicAtlas.html">dynamicAtlas</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="lookupMap.html">lookupMap</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="queriedSample.html">queriedSample</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Folders of functions:</span></p>
<ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="basics.html">basics</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="curve_handling.html">curve_handling</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="data_handling.html">data_handling</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="external.html">external</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="matchTime.html">matchTime</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 current has-children current-page"><a class="current reference internal" href="#">piv_handling</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="plotting.html">plotting</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="statistics.html">statistics</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="stripeExtraction.html">stripeExtraction</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="tiff_handling.html">tiff_handling</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container"><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="piv-handling">
<h1>piv_handling<a class="headerlink" href="#piv-handling" title="Permalink to this headline">#</a></h1>
<div class="toctree-wrapper compound">
</div>
<section id="example-usage">
<h2>Example Usage<a class="headerlink" href="#example-usage" title="Permalink to this headline">#</a></h2>
</section>
<section id="module-piv_handling">
<span id="full-contents"></span><h2>Full Contents:<a class="headerlink" href="#module-piv_handling" title="Permalink to this headline">#</a></h2>
<dl class="mat function">
<dt class="sig sig-object mat" id="piv_handling.GetPIV">
<span class="sig-prename descclassname"><span class="pre">piv_handling.</span></span><span class="sig-name descname"><span class="pre">GetPIV</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">im1</span></em>, <em class="sig-param"><span class="pre">im2</span></em>, <em class="sig-param"><span class="pre">X1</span></em>, <em class="sig-param"><span class="pre">Y1</span></em>, <em class="sig-param"><span class="pre">EdgeLength</span></em>, <em class="sig-param"><span class="pre">histequilize</span></em><span class="sig-paren">)</span><a class="headerlink" href="#piv_handling.GetPIV" title="Permalink to this definition">#</a></dt>
<dd><p>GetPIV computes PIV flow field estimate based on image1 (im1) and
image2 (im2) using the Phase Correlation method implemented in xcorr2fft.
im1 &amp; im2 are assumed to have the same dimensions. The grid X1,Y1
is assmued to be contained in the image domain with finite
EdgeLength defining size of PIV box.
Output are components of the flow fiel on the grid</p>
<p>Written by: Sebastian J Streichan, KITP, February 01, 2013
NPM added histeq step (optional)</p>
</dd></dl>
<dl class="mat script">
<dt class="sig sig-object mat" id="piv_handling.PIVScript">
<span class="sig-prename descclassname"><span class="pre">piv_handling.</span></span><span class="sig-name descname"><span class="pre">PIVScript</span></span><a class="headerlink" href="#piv_handling.PIVScript" title="Permalink to this definition">#</a></dt>
<dd><p>Using GetPIV we computes the flow field estimate based on an image sequence
im1 &amp; im2 are assumed to have the same dimensions. The grid X1,Y1
is assmued to be contained in the image domain with finite
EdgeLength defining size of PIV box.
This script generates a movie displaying the original image with flow
field overlayed.</p>
<p>Written by: Sebastian J Streichan, KITP, February 14, 2013
NPM added histequalize option on 27</p>
</dd></dl>
<dl class="mat function">
<dt class="sig sig-object mat" id="piv_handling.PIVTimeseries">
<span class="sig-prename descclassname"><span class="pre">piv_handling.</span></span><span class="sig-name descname"><span class="pre">PIVTimeseries</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">inputDir</span></em>, <em class="sig-param"><span class="pre">options</span></em><span class="sig-paren">)</span><a class="headerlink" href="#piv_handling.PIVTimeseries" title="Permalink to this definition">#</a></dt>
<dd><p>Using GetPIV we computes the flow field estimate based on an image sequence
im1 &amp; im2 are assumed to have the same dimensions. The grid X1,Y1
is assmued to be contained in the image domain with finite
EdgeLength defining size of PIV box.
This script generates a movie displaying the original image with flow
field overlayed.</p>
<p>Written by: Sebastian J Streichan, KITP, February 14, 2013
NPM added histequalize option and made function</p>
</dd></dl>
<dl class="mat script">
<dt class="sig sig-object mat" id="piv_handling.advectRuntStripes">
<span class="sig-prename descclassname"><span class="pre">piv_handling.</span></span><span class="sig-name descname"><span class="pre">advectRuntStripes</span></span><a class="headerlink" href="#piv_handling.advectRuntStripes" title="Permalink to this definition">#</a></dt>
<dd><p>test script</p>
</dd></dl>
<dl class="mat script">
<dt class="sig sig-object mat" id="piv_handling.advectRuntStripes_script">
<span class="sig-prename descclassname"><span class="pre">piv_handling.</span></span><span class="sig-name descname"><span class="pre">advectRuntStripes_script</span></span><a class="headerlink" href="#piv_handling.advectRuntStripes_script" title="Permalink to this definition">#</a></dt>
<dd><p>test script</p>
</dd></dl>
<dl class="mat function">
<dt class="sig sig-object mat" id="piv_handling.applyOpticalFlow">
<span class="sig-prename descclassname"><span class="pre">piv_handling.</span></span><span class="sig-name descname"><span class="pre">applyOpticalFlow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">pivStack</span></em>, <em class="sig-param"><span class="pre">im0</span></em>, <em class="sig-param"><span class="pre">Options</span></em><span class="sig-paren">)</span><a class="headerlink" href="#piv_handling.applyOpticalFlow" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Options</strong> (<span><code class="xref mat mat-obj docutils literal notranslate"><span class="pre">struct</span> <span class="pre">with</span> <span class="pre">fields</span></code></span>) – <dl>
<dt>mandatory fields:</dt><dd><p>outDir
minT
maxT</p>
</dd>
<dt>optional fields:</dt><dd><dl class="simple">
<dt>plot_texturepaths<span class="classifier">bool (default=true)</span></dt><dd><p>make movie of optical flow</p>
</dd>
<dt>plot_scatterpaths<span class="classifier">bool (default=false)</span></dt><dd><p>make movie of tracer beads</p>
</dd>
<dt>clipImage<span class="classifier">bool (default=true)</span></dt><dd><p>clip the texturepatch image to a rectangle</p>
</dd>
</dl>
<p>szX : size of resampled images in which PIV is performed
szY : size of resampled images in which PIV is performed
X0 : evaluation grid points, x coord
Y0 : evaluation grid points, y coord</p>
</dd>
</dl>
</p></li>
<li><p><strong>2021</strong> (<span><code class="xref mat mat-obj docutils literal notranslate"><span class="pre">NPMitchell</span></code></span>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>
<dl class="mat function">
<dt class="sig sig-object mat" id="piv_handling.extractMetricFromPIVPair">
<span class="sig-prename descclassname"><span class="pre">piv_handling.</span></span><span class="sig-name descname"><span class="pre">extractMetricFromPIVPair</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">VX</span></em>, <em class="sig-param"><span class="pre">VY</span></em>, <em class="sig-param"><span class="pre">WX</span></em>, <em class="sig-param"><span class="pre">WY</span></em>, <em class="sig-param"><span class="pre">computation_method</span></em>, <em class="sig-param"><span class="pre">truncation_factor</span></em><span class="sig-paren">)</span><a class="headerlink" href="#piv_handling.extractMetricFromPIVPair" title="Permalink to this definition">#</a></dt>
<dd><blockquote>
<div><p>Extract a comparison metric from computation on two 2D PIV fields V,W
returning a matrix of metric values calculated at all points in
the field. VX, VY, WX, WY are assumed to have the same dimensions.
The field will be spatially truncated if truncation_factor is not 0.
The method of computation used is specified by piv_computation_method.
The dimension to truncate is given by truncation_dim (1 or 2)
The factor to truncate the image by, on both sides, is given by
truncation_factor. The default dimension is 2, the horizontal
axis of the image i.e. the vertical axis of the PIV field (the
PIV program transposes the image when computing PIV to be symmetric
about the vertical axis). Also returns the minimum and maximum
time indices used along the truncation dimension, the matrix values
outside of that range should all be zeros.</p>
<p>Modified on 8/31 to input V_RMS and W_RMS as the RMS values for the
given fields, where smoothed and truncated RMS values can be taken
into account rather than simply the standard calculation.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>VX</strong> (<span><code class="xref mat mat-obj docutils literal notranslate"><span class="pre">X</span> <span class="pre">component</span> <span class="pre">of</span> <span class="pre">first</span> <span class="pre">PIV</span> <span class="pre">field</span> <span class="pre">(V),</span> <span class="pre">2D</span> <span class="pre">matrix</span></code></span>) – </p></li>
<li><p><strong>VY</strong> (<span><code class="xref mat mat-obj docutils literal notranslate"><span class="pre">Y</span> <span class="pre">component</span> <span class="pre">of</span> <span class="pre">first</span> <span class="pre">PIV</span> <span class="pre">field</span> <span class="pre">(V),</span> <span class="pre">2D</span> <span class="pre">matrix</span></code></span>) – </p></li>
<li><p><strong>WX</strong> (<span><code class="xref mat mat-obj docutils literal notranslate"><span class="pre">X</span> <span class="pre">component</span> <span class="pre">of</span> <span class="pre">second</span> <span class="pre">PIV</span> <span class="pre">field</span> <span class="pre">(W),</span> <span class="pre">2D</span> <span class="pre">matrix</span></code></span>) – </p></li>
<li><p><strong>WY</strong> (<span><code class="xref mat mat-obj docutils literal notranslate"><span class="pre">Y</span> <span class="pre">component</span> <span class="pre">of</span> <span class="pre">second</span> <span class="pre">PIV</span> <span class="pre">field</span> <span class="pre">(W),</span> <span class="pre">2D</span> <span class="pre">matrix</span></code></span>) – </p></li>
<li><p><strong>computation_method</strong> (<span><code class="xref mat mat-obj docutils literal notranslate"><span class="pre">string</span> <span class="pre">with</span> <span class="pre">potential</span> <span class="pre">values</span></code></span>) – normalized residual
unnormalized residual
inner product</p></li>
<li><p><strong>truncation_dim_img</strong> (<span><code class="xref mat mat-obj docutils literal notranslate"><span class="pre">dimension</span> <span class="pre">to</span> <span class="pre">truncate</span> <span class="pre">over,</span> <span class="pre">int</span> <span class="pre">with</span> <span class="pre">value</span> <span class="pre">1</span> <span class="pre">or</span> <span class="pre">2,</span></code></span>) – </p></li>
<li><p><strong>2</strong> (<span><code class="xref mat mat-obj docutils literal notranslate"><span class="pre">default</span> <span class="pre">dimension</span></code></span>) – </p></li>
<li><p><strong>truncation_factor</strong> (<span><code class="xref mat mat-obj docutils literal notranslate"><span class="pre">double</span> <span class="pre">factor</span> <span class="pre">to</span> <span class="pre">truncate</span> <span class="pre">matrix</span> <span class="pre">by</span> <span class="pre">on</span> <span class="pre">both</span> <span class="pre">sides,</span></code></span>) – </p></li>
<li><p><strong>(exclusive)</strong> (<span><code class="xref mat mat-obj docutils literal notranslate"><span class="pre">must</span> <span class="pre">be</span> <span class="pre">between</span> <span class="pre">0</span> <span class="pre">(inclusive)</span> <span class="pre">and</span> <span class="pre">0.5</span></code></span>) – </p></li>
<li><p><strong>Returns</strong> – MetricMat, a 2D matrix of correlation values calculated based on the
chosen method.</p></li>
<li><p><strong>Outputs</strong> – </p></li>
<li><p><strong>-------</strong> – </p></li>
<li><p><strong>2020</strong> (<span><code class="xref mat mat-obj docutils literal notranslate"><span class="pre">Vishank</span> <span class="pre">Jain-Sharma</span></code></span>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>
<dl class="mat function">
<dt class="sig sig-object mat" id="piv_handling.getPIVLab">
<span class="sig-prename descclassname"><span class="pre">piv_handling.</span></span><span class="sig-name descname"><span class="pre">getPIVLab</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">im1</span></em>, <em class="sig-param"><span class="pre">im2</span></em>, <em class="sig-param"><span class="pre">options</span></em><span class="sig-paren">)</span><a class="headerlink" href="#piv_handling.getPIVLab" title="Permalink to this definition">#</a></dt>
<dd><p>[uu, vv, u_filt, v_filt, xx, yy] = getPIVLab(im1,im2,options)</p>
<blockquote>
<div><p>getPIVLab computes PIV flow field estimate based on image1 (im1) and
image2 (im2) using the Phase Correlation method implemented in PIVLab.
im1 &amp; im2 are assumed to have the same dimensions.
Output are components of the flow field on the grid (xx, yy)</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>im1</strong> (<span><code class="xref mat mat-obj docutils literal notranslate"><span class="pre">NxM</span> <span class="pre">numeric</span></code></span>) – image at t0</p></li>
<li><p><strong>im2</strong> (<span><code class="xref mat mat-obj docutils literal notranslate"><span class="pre">NxM</span> <span class="pre">numeric</span></code></span>) – image at t0 + deltaT</p></li>
<li><p><strong>options</strong> (<span><code class="xref mat mat-obj docutils literal notranslate"><span class="pre">optional</span> <span class="pre">struct</span> <span class="pre">with</span> <span class="pre">optional</span> <span class="pre">fields</span></code></span>) – intArea1
subpixFindr
mask
roi
numPasses
intArea2
intArea3
intArea4
repeat
disAuto
clahe
claheW
highPass
highPassSz
clipping
wiener
wienerW
valid_vel
do_stdev_check
stdthres
do_local_median
neigh_thres</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul>
<li><p><strong>uu</strong> (<em>PxQ float</em>) – velocity in x</p></li>
<li><p><strong>vv</strong> (<em>PxQ float</em>) – velocity in y</p></li>
<li><p><strong>u_filt</strong> (<em>PxQ float</em>) – velocity in x</p></li>
<li><p><strong>v_filt</strong> (<em>PxQ float</em>) – velocity in y</p></li>
<li><p><strong>xx</strong> (<em>PxQ float</em>) – evaluation points in x</p></li>
<li><p><strong>yy</strong> (<em>PxQ float</em>) – evaluation points in y</p>
<p>Written by NPMitchell 2022</p>
</li>
</ul>
</p>
</dd>
</dl>
</dd></dl>
<dl class="mat script">
<dt class="sig sig-object mat" id="piv_handling.processMedFiltersScript">
<span class="sig-prename descclassname"><span class="pre">piv_handling.</span></span><span class="sig-name descname"><span class="pre">processMedFiltersScript</span></span><a class="headerlink" href="#piv_handling.processMedFiltersScript" title="Permalink to this definition">#</a></dt>
<dd><p>script to run med filters on PIV data</p>
</dd></dl>
<dl class="mat function">
<dt class="sig sig-object mat" id="piv_handling.pullbackPathlines">
<span class="sig-prename descclassname"><span class="pre">piv_handling.</span></span><span class="sig-name descname"><span class="pre">pullbackPathlines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">QS</span></em>, <em class="sig-param"><span class="pre">x0</span></em>, <em class="sig-param"><span class="pre">y0</span></em>, <em class="sig-param"><span class="pre">t0</span></em>, <em class="sig-param"><span class="pre">options</span></em><span class="sig-paren">)</span><a class="headerlink" href="#piv_handling.pullbackPathlines" title="Permalink to this definition">#</a></dt>
<dd><blockquote>
<div><p>Create paths in pullback space (in pixels, XY) by following optical
flow of PIV measured on standardized pullback map.
Note: I’ve chosen to use spatial smoothing via Gaussian blur rather
than temporal smoothing of velocities for this code.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pivStack</strong> (<span><code class="xref mat mat-obj docutils literal notranslate"><span class="pre">struct</span> <span class="pre">with</span> <span class="pre">two</span> <span class="pre">#TP</span> <span class="pre">x</span> <span class="pre">nX</span> <span class="pre">x</span> <span class="pre">nY</span> <span class="pre">float</span> <span class="pre">entries</span></code></span>) – <dl class="simple">
<dt>vx: #TP x nX x nY float</dt><dd><p>velocities in x direction</p>
</dd>
<dt>vy: #TP x nX x nY float</dt><dd><p>velocities in y direction</p>
</dd>
</dl>
</p></li>
<li><p><strong>x0</strong> (<span><code class="xref mat mat-obj docutils literal notranslate"><span class="pre">n*m</span> <span class="pre">float</span> <span class="pre">array</span></code></span>) – x coordinates in pullback pixels to start pathlines at t0</p></li>
<li><p><strong>y0</strong> (<span><code class="xref mat mat-obj docutils literal notranslate"><span class="pre">n*m</span> <span class="pre">float</span> <span class="pre">array</span></code></span>) – y coordinates in pullback pixels to start pathlines at t0</p></li>
<li><p><strong>t0</strong> – time at which to begin the pathlines, must be member of
QS.xp.fileMeta.timePoints</p></li>
<li><p><strong>options</strong> (<span><code class="xref mat mat-obj docutils literal notranslate"><span class="pre">struct</span> <span class="pre">with</span> <span class="pre">fields</span></code></span>) – <dl class="simple">
<dt>preview<span class="classifier">bool</span></dt><dd><p>view intermediate results</p>
</dd>
<dt>timePoints<span class="classifier">1d int array</span></dt><dd><p>the timpepoints along which to map pathlines that intersect with
(x0, y0) at t0</p>
</dd>
</dl>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>XX</strong> (<em>#timePoints x size(x0, 1) x size(x0, 2) float array</em>) – the pullback pixel X coordinates of the pathline spanning timePoints</p></li>
<li><p><strong>YY</strong> (<em>#timePoints x size(x0, 1) x size(x0, 2) float array</em>) – the pullback pixel Y coordinates of the pathline spanning timePoints</p></li>
<li><p><em>NPMitchell 2021</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>
<dl class="mat function">
<dt class="sig sig-object mat" id="piv_handling.rk4DynamicVelocity2D">
<span class="sig-prename descclassname"><span class="pre">piv_handling.</span></span><span class="sig-name descname"><span class="pre">rk4DynamicVelocity2D</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">pts</span></em>, <em class="sig-param"><span class="pre">X0v</span></em>, <em class="sig-param"><span class="pre">Y0v</span></em>, <em class="sig-param"><span class="pre">vx</span></em>, <em class="sig-param"><span class="pre">vy</span></em>, <em class="sig-param"><span class="pre">hh</span></em>, <em class="sig-param"><span class="pre">tt</span></em><span class="sig-paren">)</span><a class="headerlink" href="#piv_handling.rk4DynamicVelocity2D" title="Permalink to this definition">#</a></dt>
<dd><p>[xyOut, xyPaths] = rk4DynamicVelocity2D(pts, XY0v, v2d, hh, tt)
solve Runge-Kutta 4th order in 2d space with fixed velocity field</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pts</strong> (<span><code class="xref mat mat-obj docutils literal notranslate"><span class="pre">Px2</span> <span class="pre">numeric</span></code></span>) – points at which we begin tracing paths in 2d</p></li>
<li><p><strong>XY0v</strong> (<span><code class="xref mat mat-obj docutils literal notranslate"><span class="pre">MxN</span> <span class="pre">numeric</span></code></span>) – evaluation points at which velocities reside</p></li>
<li><p><strong>vx</strong> (<span><code class="xref mat mat-obj docutils literal notranslate"><span class="pre">TxMxN</span> <span class="pre">numeric</span></code></span>) – dynamic 2d velocity in x at evaluation points (time, vxgridX, vxgridY)</p></li>
<li><p><strong>vy</strong> (<span><code class="xref mat mat-obj docutils literal notranslate"><span class="pre">TxMxN</span> <span class="pre">numeric</span></code></span>) – dynamic 2d velocity in y at evaluation points (time, vygridX, vygridY)</p></li>
<li><p><strong>hh</strong> (<span><code class="xref mat mat-obj docutils literal notranslate"><span class="pre">optional</span> <span class="pre">float</span> <span class="pre">0&lt;h&lt;1</span> <span class="pre">(default=0.05)</span></code></span>) – stepsize for finding path</p></li>
<li><p><strong>tt</strong> (<span><code class="xref mat mat-obj docutils literal notranslate"><span class="pre">optional</span> <span class="pre">Qx1</span> <span class="pre">float</span> <span class="pre">array</span> <span class="pre">(default=0:hh:size(v2d,</span> <span class="pre">1))</span></code></span>) – timestamps relative to the indices of v2d at which to compute</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>xyOut</strong> (<em>Px2 float</em>) – final positions</p></li>
<li><p><strong>xyPaths</strong> (<em>length P cell array</em>) – paths from pts to xyOut</p></li>
<li><p><em>NPMitchell 2022</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>
<dl class="mat function">
<dt class="sig sig-object mat" id="piv_handling.rk4FixedVelocity2D">
<span class="sig-prename descclassname"><span class="pre">piv_handling.</span></span><span class="sig-name descname"><span class="pre">rk4FixedVelocity2D</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">pts</span></em>, <em class="sig-param"><span class="pre">X0v</span></em>, <em class="sig-param"><span class="pre">Y0v</span></em>, <em class="sig-param"><span class="pre">vx</span></em>, <em class="sig-param"><span class="pre">vy</span></em>, <em class="sig-param"><span class="pre">hh</span></em>, <em class="sig-param"><span class="pre">tt</span></em><span class="sig-paren">)</span><a class="headerlink" href="#piv_handling.rk4FixedVelocity2D" title="Permalink to this definition">#</a></dt>
<dd><p>[xyOut, xyPaths] = rk4FixedVelocity2D(pts, XY0v, v2d, hh, tt)
solve Runge-Kutta 4th order in 2d space with fixed velocity field</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pts</strong> (<span><code class="xref mat mat-obj docutils literal notranslate"><span class="pre">Px2</span> <span class="pre">numeric</span></code></span>) – points at which we begin tracing paths in 2d</p></li>
<li><p><strong>XY0v</strong> (<span><code class="xref mat mat-obj docutils literal notranslate"><span class="pre">MxN</span> <span class="pre">numeric</span></code></span>) – evaluation points at which velocities reside</p></li>
<li><p><strong>v2d</strong> (<span><code class="xref mat mat-obj docutils literal notranslate"><span class="pre">MxN</span> <span class="pre">numeric</span></code></span>) – 2d velocity at evaluation points</p></li>
<li><p><strong>hh</strong> (<span><code class="xref mat mat-obj docutils literal notranslate"><span class="pre">float</span> <span class="pre">0&lt;h&lt;</span> <span class="pre">1</span></code></span>) – stepsize for finding path</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>xyOut</strong> (<em>Px2 float</em>) – final positions</p></li>
<li><p><strong>xyPaths</strong> (<em>length P cell array, such that xyPaths{i} is #ttx2 float array</em>) – paths from pts to xyOut</p></li>
<li><p><em>NPMitchell 2022</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>
<dl class="mat function">
<dt class="sig sig-object mat" id="piv_handling.runMedianFilterOnPIVField">
<span class="sig-prename descclassname"><span class="pre">piv_handling.</span></span><span class="sig-name descname"><span class="pre">runMedianFilterOnPIVField</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">input_PIV_path</span></em>, <em class="sig-param"><span class="pre">output_path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#piv_handling.runMedianFilterOnPIVField" title="Permalink to this definition">#</a></dt>
<dd><blockquote>
<div><p>Runs a median filter on the PIV data located in input_PIV_path and
saves the data to output_path</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_PIV_dir</strong> (<span><code class="xref mat mat-obj docutils literal notranslate"><span class="pre">path</span> <span class="pre">to</span> <span class="pre">directory</span> <span class="pre">containing</span> <span class="pre">all</span> <span class="pre">the</span> <span class="pre">PIV</span> <span class="pre">.mat</span> <span class="pre">structures</span></code></span>) – </p></li>
<li><p><strong>output_dir</strong> (<span><code class="xref mat mat-obj docutils literal notranslate"><span class="pre">path</span> <span class="pre">to</span> <span class="pre">directory</span> <span class="pre">in</span> <span class="pre">which</span> <span class="pre">to</span> <span class="pre">save</span> <span class="pre">median</span> <span class="pre">filtered</span> <span class="pre">PIV</span></code></span>) – </p></li>
<li><p><strong>median_order</strong> (<span><code class="xref mat mat-obj docutils literal notranslate"><span class="pre">order</span> <span class="pre">of</span> <span class="pre">median</span> <span class="pre">filter--total</span> <span class="pre">range</span> <span class="pre">to</span> <span class="pre">take</span> <span class="pre">median</span> <span class="pre">over</span></code></span>) – </p></li>
<li><p><strong>Outputs</strong> – </p></li>
<li><p><strong>fields</strong> (<span><code class="xref mat mat-obj docutils literal notranslate"><span class="pre">new</span> <span class="pre">directory</span> <span class="pre">with</span> <span class="pre">name</span> <span class="pre">output_directory</span> <span class="pre">that</span> <span class="pre">containts</span> <span class="pre">saved</span> <span class="pre">PIV</span></code></span>) – </p></li>
<li><p><strong>filter</strong> (<span><code class="xref mat mat-obj docutils literal notranslate"><span class="pre">which</span> <span class="pre">have</span> <span class="pre">been</span> <span class="pre">run</span> <span class="pre">through</span> <span class="pre">median</span></code></span>) – </p></li>
</ul>
</dd>
</dl>
<p>Vishank Jain-Sharma 2020, edits NPMitchell 2022</p>
</dd></dl>
<dl class="mat function">
<dt class="sig sig-object mat" id="piv_handling.xcorr2fft">
<span class="sig-prename descclassname"><span class="pre">piv_handling.</span></span><span class="sig-name descname"><span class="pre">xcorr2fft</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">image1</span></em>, <em class="sig-param"><span class="pre">image2</span></em><span class="sig-paren">)</span><a class="headerlink" href="#piv_handling.xcorr2fft" title="Permalink to this definition">#</a></dt>
<dd><p>xcorr2fft computes offsets between images image1 and image2 based
on Phase Correlation method. image1 &amp; image2 are assumed to have
the same dimensions.</p>
<p>Written by: Sebastian J Streichan, EMBL, February 29, 2012</p>
</dd></dl>
</section>
<section id="indices-and-tables">
<h2>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="plotting.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">plotting</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="matchTime.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">matchTime</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022, Noah P Mitchell
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">piv_handling</a><ul>
<li><a class="reference internal" href="#example-usage">Example Usage</a></li>
<li><a class="reference internal" href="#module-piv_handling">Full Contents:</a></li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/scripts/furo.js"></script>
    </body>
</html>